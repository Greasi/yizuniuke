define("nowcoder/1.2.348/javascripts/site/courses/detail",["../../lib/jquery","../../lib/underscore","../../core/base","../../util/radar","../../util/util","../../util/cookie","../../component/select","../../util/dom","../../util/browser","../../core/component","../../util/event","../../action/courses","../../util/ajax","../../core/siteConfig","../../component/popup","../../component/layer","../../util/dragdrop","./courseUtil","../../util/limit","../../util/highlighter","../../lib/syntaxhighlighter/shCore","../../lib/syntaxhighlighter/style/shCoreDefault.css"],function(a){function b(){var a=this;j.copy(a,window,["course"]),a.buyUrl="/order?itemId="+a.course.itemId+"&itemType=COURSE",window.setTimeout(function(){a.initRadar()},800)}function c(a){var b=h(a.currentTarget),c=b.closest("table");-1!==b.text().indexOf("收起")?(c.find("tr.js-more-tr").hide(),b.html("+查看全部"),m.scrollToEl({el:c,ext:-1*m.getNavHeight()-2})):(c.find("tr.js-more-tr").show(),b.html("-收起"))}function d(a){a.preventDefault();var b=this,c=h(a.currentTarget);(!c.hasClass("nc-req-auth")||b.isUserLogin())&&new n({noUnique:!1,hasNoTitle:!0,hasNoMove:!0,hasNoFooter:!1,content:['<div class="confirm-content">','<div class="poptip-word">','<span class="warning-ico"></span>','<span class="warning-word">本节内容需付费，是否购买本门课程？</span>',"</div>","</div>"].join(""),width:500,ok:function(){},okTxt:"购买课程",cancel:function(){},listeners:{render:function(){this.okBtn.attr("href",b.buyUrl)}}})}function e(a){var b=this;return b.isUserLogin()?(window.location.href=b.buyUrl,void 0):(a.preventDefault(),void 0)}function f(){var a=this,b=h(".js-progress-box");0!==b.length&&k.loadEcharts(function(){i.forEach(b,function(b){var c=h('<div style="width:54px;height:54px;margin:0 auto;"></div>'),b=h(b),d=window.parseInt(b.attr("data-complete"),10)||0;0===d&&l.ie()&&l.ie()<9||(b.html("").append(c),a.renderInfo(c,d))})})}function g(a,b){var c=h(a).width(),d=Math.round(c/2);b=b||0;var e=100-b;a=a.get(0);var f={series:[{type:"pie",clockWise:!0,radius:[d-5,d],x:"0%",itemStyle:{normal:{label:{show:!1},labelLine:{show:!1},color:"rgba(73, 187, 154, 1)"}},data:[{value:b,name:"进度",itemStyle:{normal:{label:{show:!0,position:"center",formatter:"{b}\r\n"+b+"%",textStyle:{baseline:"middle",color:"rgba(73, 187, 154, 1)"}},labelLine:{show:!1}}}},{value:e,name:"invisible",itemStyle:{normal:{color:"rgba(0,0,0,0)"},emphasis:{color:"rgba(0,0,0,0)"}}}]},{type:"pie",clockWise:!1,radius:[d-3,d-2],itemStyle:{normal:{label:{show:!1},labelLine:{show:!1},color:"rgba(73, 187, 154, 1)"}},data:[{value:e,name:1},{value:b,name:"invisible",itemStyle:{normal:{color:"rgba(0,0,0,0)"},emphasis:{color:"rgba(0,0,0,0)"}}}]}]},g=window.echarts.init(a);g.setOption(f)}var h=a("../../lib/jquery"),i=a("../../lib/underscore"),j=a("../../core/base"),k=a("../../util/radar"),l=a("../../util/browser"),m=a("../../util/dom");a("../../action/courses");var n=a("../../component/popup");a("./courseUtil"),j.ready({initialize:b,events:{"click a.js-show-all":c,"click a.nc-req-buy":d,"click .js-click-buy":e},initRadar:f,renderInfo:g})});
