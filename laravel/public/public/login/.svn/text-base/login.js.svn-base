define("nowcoder/1.2.346/javascripts/site/login/login",["../../lib/jquery","../../core/base","../../lib/underscore","../../util/util","../../util/cookie","../../action/login","../../util/ajax","../../core/siteConfig","../../component/input","../../util/dom","../../util/browser","../../core/component","../../util/event","../../component/popup","../../component/layer","../../util/dragdrop"],function(a){function b(){var a=this;a.remLoginChk=d("#remLoginChk"),a.info={},a.emailItem=h.transform(d("#emailIpt").parent(),{blur:function(){var b=this,c=d.trim(b.val());return f.isEmail(c)||f.isPhone(c)?(a.info.email=c,b.none(),void 0):(a.info.email="",b.errorTips("请输入正确的邮箱或手机"))}}),a.pwdItem=h.transform(d("#passwordIpt").parent(),{blur:function(){var b=d.trim(a.pwdItem.val());a.pwdItem.none(),a.info.password=b}})}function c(a){a.preventDefault();var b=this;try{b.emailItem.blur(),b.pwdItem.blur()}catch(c){}var d=b.info;if(!d.email)return b.emailItem.errorTips("请输入正确的邮箱"),void 0;if(!d.password)return b.pwdItem.errorTips("请输入密码"),void 0;var e=b.remLoginChk.prop("checked");g.login({body:{email:d.email,pwd:d.password,remember:e?"true":"false"},call:function(){var a=f.getUrlCb("callBack");window.location.href=a||"/home"},error:function(a){4===a.code?b.pwdItem.errorTips(a.msg||"密码不正确，请重试！"):b.emailItem.errorTips(a.msg||!0)}})}var d=a("../../lib/jquery"),e=a("../../core/base"),f=a("../../util/util"),g=a("../../action/login"),h=a("../../component/input");a("../../component/popup"),e.ready({initialize:b,binds:{"click #loginBtn":c,"submit div.input-section form":c}})});
