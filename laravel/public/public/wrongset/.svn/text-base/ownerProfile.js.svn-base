define("nowcoder/1.2.348/javascripts/site/profile/ownerProfile",["../../lib/jquery","../../core/base","../../lib/underscore","../../util/util","../../util/cookie","../../util/limit","../../core/siteConfig","../../util/avatarUpload","../../util/upload","../../lib/swfupload","../../component/popup","../../core/component","../../util/event","../../component/layer","../../util/dragdrop","../../util/browser","../../component/avatarDialog","../../action/profile","../../util/ajax","../../action/contest","../../util/radar","../../component/select","../../util/dom"],function(a){function b(){var a=this;a.followersCountEl=g("#followers-count"),a.followersCount=+g("#followers-count").text()||0,a.initAvatar(),window.setTimeout(function(){a.renderRadar()},250)}function c(){var a=g("#avatarHock");a.length<=0||k({el:a,btn:{width:100,height:100},call:function(a){a&&a.url&&(g("#avatarImage").attr("src",a.url),g("div.nowcoder-header div.img-box img").attr("src",a.url))}})}function d(a){var b=this,c=g(a.currentTarget),d=c.hasClass("click-follow");window.isLogin&&(i.mark(c)||l[d?"follow":"unfollow"]({body:{id:window.curUser.id,type:j.type.user},call:function(){d?(c.removeClass("click-follow btn-primary").addClass("click-unfollow btn-default").html('<span class="fui-check"></span>已关注'),c.attr("title","取消关注"),b.followersCountEl.text(++b.followersCount)):(c.removeClass("click-unfollow btn-default").addClass("click-follow btn-primary").html('<span class="fui-plus"></span>关注TA'),c.attr("title","关注"),b.followersCountEl.text(--b.followersCount))},error:function(a){n.alert(a.msg||j.tips.ajaxError)},always:function(){i.pause(c)}}))}function e(b){var c=g(b.currentTarget);if(window.isActive&&window.isLogin){var d=c.attr("data-sender-id"),e=c.attr("data-sender-name");d&&a.async("../../component/messageDialog",function(a){a.show({title:"发私信",content:"Hi",receiver:{name:e||"牛客人",id:d}})})}}function f(){var a=g("#sideRaderBox"),b=a.find("div.rader-container");window.userSkillGraphsDetail&&m.init({parent:a,selectDv:a.find("div.js-job-select"),radarDv:b,jobs:window.userSkillGraphs,details:window.userSkillGraphsDetail,loadSucc:function(){a.show(),b.height(b.width())}})}var g=a("../../lib/jquery"),h=a("../../core/base");a("../../util/util");var i=a("../../util/limit"),j=a("../../core/siteConfig"),k=a("../../util/avatarUpload"),l=a("../../action/contest"),m=a("../../util/radar"),n=a("../../component/popup");h.ready({initialize:b,events:{"click a.click-follow":d,"click a.click-unfollow":d,"click a.click-send-message":e},initAvatar:c,renderRadar:f})});
